{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\kniel\\\\HiltonAssessment\\\\hilton\\\\pages\\\\index.js\";\nvar __jsx = React.createElement;\nimport Room from '../components/Room';\nimport React, { Component } from 'react';\nimport Cookie from 'js-cookie';\nimport parserCookie from '../parseCookies';\nimport './index.scss';\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this, props));\n    _this.state = {};\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.cookies.lastState === undefined) {\n        this.setState({\n          numberOfRooms: 4,\n          roomState: [true, false, false, false],\n          rooms: [{\n            id: 1,\n            adults: 1,\n            children: 0\n          }, {\n            id: 2,\n            adults: 1,\n            children: 0\n          }, {\n            id: 3,\n            adults: 1,\n            children: 0\n          }, {\n            id: 4,\n            adults: 1,\n            children: 0\n          }]\n        });\n      } else if (this.props.cookies !== undefined) {\n        var refreshState = this.props.cookies;\n        refreshState = JSON.parse(refreshState.lastState);\n        this.setState({\n          numberOfRooms: refreshState.numberOfRooms,\n          roomState: refreshState.roomState,\n          rooms: refreshState.rooms\n        });\n      }\n    }\n  }, {\n    key: \"handleCheckedChange\",\n    value: function handleCheckedChange(i) {\n      var newRoomState = this.state.roomState;\n      var currentIndex = i;\n      var nextIndex = currentIndex + 1;\n      var prevIndex = currentIndex - 1;\n\n      switch (true) {\n        case newRoomState[nextIndex] === true:\n          for (var num = currentIndex; num < newRoomState.length; num++) {\n            if (newRoomState[num] === true) {\n              newRoomState[num] = !newRoomState[num];\n            }\n          }\n\n          ;\n          break;\n\n        case newRoomState[prevIndex] === false:\n          for (var _num = 1; _num <= currentIndex; _num++) {\n            if (newRoomState[_num] === false) {\n              newRoomState[_num] = !newRoomState[_num];\n            }\n          }\n\n          ;\n          break;\n\n        default:\n          newRoomState[currentIndex] = !newRoomState[currentIndex];\n          break;\n      }\n\n      this.setState({\n        roomState: newRoomState\n      });\n    }\n  }, {\n    key: \"calculateRooms\",\n    value: function calculateRooms() {\n      var _this2 = this;\n\n      var rooms = [];\n\n      var _loop = function _loop(i) {\n        var roomNumber = i;\n        var room = _this2.state.rooms[i];\n        rooms.push(__jsx(Room, {\n          key: i,\n          number: roomNumber,\n          room: _this2.state.rooms[i],\n          adults: _this2.state.rooms[i].adults,\n          children: _this2.state.rooms[i].children,\n          handleAdultValueChange: function handleAdultValueChange() {\n            return _this2.handleAdultValueChange(room.id, event);\n          },\n          handleChildValueChange: function handleChildValueChange() {\n            return _this2.handleChildValueChange(room.id, event);\n          },\n          checked: _this2.state.roomState[roomNumber],\n          handleChange: function handleChange() {\n            return _this2.handleCheckedChange(roomNumber);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }));\n      };\n\n      for (var i = 0; i < this.state.numberOfRooms; ++i) {\n        _loop(i);\n      }\n\n      return rooms;\n    }\n  }, {\n    key: \"handleAdultValueChange\",\n    value: function handleAdultValueChange(id, event) {\n      var newRooms = this.state.rooms.slice();\n      var index = this.state.rooms.findIndex(function (i) {\n        return i.id == id;\n      });\n      newRooms[index].id = id;\n      newRooms[index].adults = Number(event.target.value);\n      this.setState({\n        rooms: newRooms\n      });\n    }\n  }, {\n    key: \"handleChildValueChange\",\n    value: function handleChildValueChange(id, event) {\n      var newRooms = this.state.rooms.slice();\n      var index = this.state.rooms.findIndex(function (i) {\n        return i.id == id;\n      });\n      newRooms[index].id = id;\n      newRooms[index].children = Number(event.target.value);\n      this.setState({\n        rooms: newRooms\n      });\n    }\n  }, {\n    key: \"handleOnSubmit\",\n    value: function handleOnSubmit(event) {\n      event.preventDefault();\n      Cookie.set('lastState', this.state);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return __jsx(\"form\", {\n        className: \"listing-of-rooms\",\n        onSubmit: function onSubmit(event) {\n          return _this3.handleOnSubmit(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, this.calculateRooms(), __jsx(\"input\", {\n        type: \"submit\",\n        value: \"Submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref) {\n        var req, cookies;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                req = _ref.req;\n                cookies = parserCookie(req);\n                return _context.abrupt(\"return\", {\n                  cookies: cookies\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Home;\n}(Component);\n\nexport default Home;","map":{"version":3,"sources":["C:/Users/kniel/HiltonAssessment/hilton/pages/index.js"],"names":["Room","React","Component","Cookie","parserCookie","Home","props","state","cookies","lastState","undefined","setState","numberOfRooms","roomState","rooms","id","adults","children","refreshState","JSON","parse","i","newRoomState","currentIndex","nextIndex","prevIndex","num","length","roomNumber","room","push","handleAdultValueChange","event","handleChildValueChange","handleCheckedChange","newRooms","slice","index","findIndex","Number","target","value","preventDefault","set","handleOnSubmit","calculateRooms","req"],"mappings":"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","sourcesContent":["import Room from '../components/Room';\r\nimport React, { Component } from 'react';\r\nimport Cookie from 'js-cookie';\r\nimport parserCookie from '../parseCookies';\r\nimport './index.scss';\r\n\r\nclass Home extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { }\r\n  }\r\n  static async getInitialProps({req}) {\r\n    const cookies = parserCookie(req);\r\n    return { cookies }\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    if (this.props.cookies.lastState === undefined) {\r\n      this.setState({\r\n        numberOfRooms: 4,\r\n        roomState: [true, false, false, false],\r\n        rooms: [\r\n          {id: 1, adults: 1, children: 0},\r\n          {id: 2, adults: 1, children: 0},\r\n          {id: 3, adults: 1, children: 0},\r\n          {id: 4, adults: 1, children: 0}\r\n        ]\r\n      })\r\n    } else if (this.props.cookies !== undefined) {\r\n      let refreshState = this.props.cookies;\r\n      refreshState = JSON.parse(refreshState.lastState)\r\n      this.setState({\r\n        numberOfRooms: refreshState.numberOfRooms,\r\n        roomState: refreshState.roomState,\r\n        rooms: refreshState.rooms\r\n      });\r\n    }\r\n  }\r\n\r\n  handleCheckedChange(i) {\r\n    let newRoomState = this.state.roomState;\r\n    let currentIndex = i;\r\n    let nextIndex = currentIndex + 1;\r\n    let prevIndex = currentIndex - 1;\r\n    switch (true) {\r\n      case (newRoomState[nextIndex] === true):\r\n          for(let num = currentIndex; num < newRoomState.length; num++) {\r\n            if (newRoomState[num] === true) {\r\n              newRoomState[num] = !newRoomState[num];\r\n            }\r\n          };\r\n        break;\r\n      case (newRoomState[prevIndex] === false):\r\n          for (let num = 1; num <= currentIndex; num++) {\r\n            if (newRoomState[num] === false){\r\n              newRoomState[num] = !newRoomState[num];\r\n            }\r\n          };\r\n          break;\r\n      default:\r\n        newRoomState[currentIndex] = !newRoomState[currentIndex];\r\n        break;\r\n    }\r\n    this.setState({ roomState: newRoomState});\r\n  }\r\n\r\n  calculateRooms() {\r\n    let rooms = [];\r\n    for(let i = 0; i < this.state.numberOfRooms; ++i) {\r\n      let roomNumber = i;\r\n      let room = this.state.rooms[i];\r\n      rooms.push(<Room\r\n        key={i}\r\n        number={roomNumber}\r\n        room={this.state.rooms[i]}\r\n        adults={this.state.rooms[i].adults}\r\n        children={this.state.rooms[i].children}\r\n        handleAdultValueChange={() => this.handleAdultValueChange(room.id, event)}\r\n        handleChildValueChange={() => this.handleChildValueChange(room.id, event)}\r\n        checked={this.state.roomState[roomNumber]}\r\n        handleChange={() => this.handleCheckedChange(roomNumber)}/>\r\n      )\r\n    }\r\n    return rooms;\r\n  }\r\n\r\n  handleAdultValueChange(id, event) {\r\n    let newRooms = this.state.rooms.slice();\r\n    let index = this.state.rooms.findIndex(i => i.id == id)\r\n    newRooms[index].id = id;\r\n    newRooms[index].adults = Number(event.target.value);\r\n    this.setState({ rooms: newRooms });\r\n  }\r\n\r\n  handleChildValueChange(id, event) {\r\n    let newRooms = this.state.rooms.slice();\r\n    let index = this.state.rooms.findIndex(i => i.id == id)\r\n    newRooms[index].id = id;\r\n    newRooms[index].children = Number(event.target.value);\r\n    this.setState({ rooms: newRooms });\r\n  }\r\n\r\n  handleOnSubmit(event) {\r\n    event.preventDefault();\r\n    Cookie.set('lastState', this.state);\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <form className=\"listing-of-rooms\" onSubmit={event => this.handleOnSubmit(event)}>\r\n        {this.calculateRooms()}\r\n        <input type=\"submit\" value=\"Submit\"/>\r\n      </form>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Home;"]},"metadata":{},"sourceType":"module"}